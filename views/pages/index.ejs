<!DOCTYPE html>
<html lang="en">
    <head>
        <title>PE Tracker</title>
        <meta charset="UTF-8">
    </head>
    <body>
        <h1>PE Tracker</h1>

        <label for="studentsName">Select Student's Name:</label>

            <select name="sName" id="sName">
                <option value="Kim Adams">Kim Adams</option>
                <option value="Ed Anderson">Ed Anderson</option>
                <option value="Mable Berry">Mable Berry</option>
                <option value="Dallas Brown">Dallas Brown</option>
                <option value="Jeremy Bryan">Jeremy Bryan</option>
                <option value="Estelle Butler">Estelle Butler</option>
                <option value="Mildred Daniels">Mildred Daniels</option>
                <option value="Essie Edwards">Essie Edwards</option>
                <option value="Kellie Frank">Kellie Frank</option>
                <option value="Geraldine Ford">Geraldine Ford</option>
                <option value="Joyce Gibson">Joyce Gibson</option>
                <option value="Wayne Henry">Wayne Henry</option>
                <option value="Otis Henderson">Otis Henderson</option>
                <option value="Eva Hoffman">Eva Hoffman</option>
                <option value="Rickey Jefferson">Rickey Jefferson</option>
                <option value="Ora Larson">Ora Larson</option>
                <option value="Lindsay Morrison">Lindsay Morrison</option>
                <option value="Brad Phelps">Brad Phelps</option>
                <option value="Vernon Ramirez">Vernon Ramirez</option>
                <option value="Tom Roberts">Tom Roberts</option>
                <option value="Manuel Schwartz">Manuel Schwartz</option>
                <option value="Cameron Simmons">Cameron Simmons</option>
                <option value="Amos Wheeler">Amos Wheeler</option>
                <option value="Theodore Williams">Theodore Williams</option>
                <option value="Bradley Tran">Bradley Tran</option>
            </select>

        <button onclick="getName()">
            Select Student
        </button>

        <p>
            The sudent that was chosen was:
            <span class="output"></span>
        </p>
        <br>
        <br>
        <h1>Teacher Behavior:</h1>

        <% tasks.forEach(function(r) {%>
        <button id='<%= r.id %>'onClick='javascript:logTask(<%= r.id %>);'><%= r.name %></button>
        <% }); %>
        <script>
            


        let currentTaskId = null;
            
        const logTask = async function(id) {
          const response = await fetch('/log', {
               method: 'POST',
                headers: {
                    'Accept': 'application/json',
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    users_id: -1,
                    students_id: -1,
                    tasks_id:id,
                    duration: "'+00:00:01'"
                })
            });
            
            const result = await response.json();
            console.log(result);
            
            currentTaskId = id;
        };

        function getName() {
            selectElement = document.querySelector('#sName');
            output = selectElement.options[selectElement.selectedIndex].value;
            document.querySelector('.output').textContent = output;
        }
        </script>
    </body>
</html>